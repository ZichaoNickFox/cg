package(default_visibility=["//visibility:public"])
load("@rules_cc//cc:defs.bzl", "cc_binary")

cc_library (
  name = "gl",
  srcs = [
    "gl.h",
    "gl.cc",
  ],
  deps = [
    "//base:debug",
    "@glew",
  ],
)

cc_library(
  name = "renderer",
  srcs = [
    "automic_counter.h",
    "automic_counter.cc",
    "bvh.h",
    "bvh.cc",
    "camera.h",
    "camera.cc",
    "color.h",
    "config.h",
    "config.cc",
    "definition.h",
    "filter.h",
    "filter.cc",
    "frame_stat.h",
    "frame_stat.cc",
    "framebuffer.h",
    "framebuffer.cc",
    "framebuffer_attachment.h",
    "framebuffer_attachment.cc",
    "geometry.h",
    "geometry.cc",
    "inspector.h",
    "inspector.cc",
    "io.h",
    "io.cc",
    "light.h",
    "light.cc",
    "material.h",
    "material.cc",
    "math.h",
    "math.cc",
    "mesh.h",
    "mesh.cc",
    "mesh/cube_mesh.h",
    "mesh/cube_mesh.cc",
    "mesh/empty_mesh.h",
    "mesh/empty_mesh.cc",
    "mesh/lines_mesh.h",
    "mesh/lines_mesh.cc",
    "mesh/mesh_util.h",
    "mesh/mesh_util.cc",
    "mesh/plane_mesh.h",
    "mesh/plane_mesh.cc",
    "mesh/sphere_mesh.h",
    "mesh/sphere_mesh.cc",
    "model_loader.h",
    "model_loader.cc",
    "object.h",
    "object.cc",
    "ping_pong.h",
    "primitive.h",
    "primitive.cc",
    "scene.h",
    "scene.cc",
    "shader.h",
    "shader.cc",
    "shader_program.h",
    "shader_program.cc",
    "shader_loader.h",
    "shader_loader.cc",
    "shadow.h",
    "shadow.cc",
    "ssbo.h",
    "ssbo.cc",
    "texture.h",
    "texture.cc",
    "texture_buffer.h",
    "texture_buffer.cc",
    "transform.h",
    "transform.cc",
  ],
  deps = [
    "//base:debug",
    "//renderer:gl",
    "//renderer:util",
    "@assimp",
    "@glm",
    "@imgui",
    "@ordered_map",
    "@stb"
  ],
)

cc_library(
  name = "util",
  srcs = [
    "util.h",
    "util.cc",
  ],
  deps = [
    "//base:debug",
    # TODO : for compile success
    "//renderer/proto:cc_config_proto",
    "@fmt",
    "@glm",
  ],
)
